<?php  return array (
  'resourceClass' => 'MODX\\Revolution\\modDocument',
  'resource' => 
  array (
    'id' => 9,
    'type' => 'document',
    'pagetitle' => 'customize-tour',
    'longtitle' => '',
    'description' => '',
    'alias' => 'customize-tour',
    'link_attributes' => '',
    'published' => 1,
    'pub_date' => 0,
    'unpub_date' => 0,
    'parent' => 0,
    'isfolder' => 0,
    'introtext' => '',
    'content' => '[[!CustomizeTour]]',
    'richtext' => 1,
    'template' => 2,
    'menuindex' => 8,
    'searchable' => 1,
    'cacheable' => 1,
    'createdby' => 1,
    'createdon' => 1765883930,
    'editedby' => 1,
    'editedon' => 1765884000,
    'deleted' => 0,
    'deletedon' => 0,
    'deletedby' => 0,
    'publishedon' => 1765884000,
    'publishedby' => 1,
    'menutitle' => '',
    'content_dispo' => 0,
    'hidemenu' => 0,
    'class_key' => 'MODX\\Revolution\\modDocument',
    'context_key' => 'web',
    'content_type' => 1,
    'uri' => '',
    'uri_override' => 0,
    'hide_children_in_tree' => 0,
    'show_in_tree' => 1,
    'properties' => NULL,
    'alias_visible' => 1,
    '_content' => '<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="<?php echo WEBSITE_DESCRIPTION; ?>">
    <meta name="keywords" content="<?php echo WEBSITE_KEYWORDS; ?>">
    <meta name="author" content="Explore Vacations">
    <meta name="robots" content="index, follow">

    <!-- Page Title -->
    <title>Explore Vacations</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <!-- Canonical URL -->
    <link rel="canonical" href="">

    <!-- Fontawesome -->
    <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <!-- Swiper JS -->
    <link rel="stylesheet" href="node_modules/swiper/swiper-bundle.min.css">
    <!-- AOS Animations CSS -->
    <link href="node_modules/aos/dist/aos.css" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/overrides.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>

<body>
    <!-- Bootstrap -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Swiper JS -->
    <script src="node_modules/swiper/swiper-bundle.min.js"></script>
    <!-- AOS Animations JS -->
    <script src="node_modules/aos/dist/aos.js"></script>
    <!-- Whatsapp widget JS -->
    <script src="assets/js/whatsapp-widget.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
<header>
    <!-- Navbar starts-->
    <nav class="navbar navbar-expand-lg p-lg-0">
        <div class="container">
            <a class="navbar-brand" href="./">
                <img src="assets/images/logo.png" alt="Explore Vacations | Logo" class="d-none d-lg-inline">
                <!-- <span>
                    Explore Vacations
                </span> -->
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars"></i>
            </button>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title">Explore Vacations</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="./" page-name="home">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=2" page-name="about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=3" page-name="tours">Tours</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=4" page-name="faq">FAQ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=5" page-name="blogs">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=7" page-name="contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar ends-->
</header>
[[!CustomizeTour]]
<footer>
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-4 col order-lg-1 ">
                <h6 class="footer-logo m-0"><img src="assets/images/footer-logo.png" alt="Explore Vacations | Logo"></h6>
                <p class="my-3 my-lg-4">Join us in exploring Sri Lanka, <br>where adventure meets excellence.</p>
                <ul class="list-unstyled d-flex" id="footer-social-list">
                    <li class="me-2">
                        <a href="https://www.facebook.com/explorevacationssrilanka" target="_blank" alt="facebook">
                            <i class="fa-brands fa-facebook-f"></i>
                        </a>
                    </li>
                    <li class="mx-2">
                        <a href="https://www.instagram.com/explorevacationssrilanka/" target="_blank" alt="instragram">
                            <i class="fa-brands fa-instagram"></i>
                        </a>
                    </li>
                    <li class="ms-2">
                        <a href="https://wa.me/+94761414554" target="_blank" alt="whatsapp">
                            <i class="fa-brands fa-whatsapp"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-2">
                <h6 class="my-4 mt-lg-0">Links</h6>
                <ul class="list-unstyled" id="footer-nav-link-list">
                    <li>
                        <a href="./">Home</a>
                    </li>
                    <li>
                        <a href="index.php?id=2">About Us</a>
                    </li>
                    <li>
                        <a href="index.php?id=4">FAQ</a>
                    </li>
                    <li>
                        <a href="index.php?id=5">Blogs</a>
                    </li>
                    <li>
                        <a href="index.php?id=7">Contact Us</a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-4">
                <h6 class="my-4 mt-lg-0">Contact</h6>
                <ul class="list-unstyled" id="footer-contact-list">
                    <li>
                        <img src="assets/images/icons/footer-phone.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="tel:+94761414554">+94 76 1414 554</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-email.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="mailto:info@explorevacations.lk">info@explorevacations.lk</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-location.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="https://maps.app.goo.gl/Coi2NuS2utwZLLhC6" target="_blank">371/5 Negombo Rd, Seeduwa</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p class="m-0 py-4">Designed and Developed by <a href="" target="_blank">Explore Vacations</a>. <br class="d-md-none">¬© 2025</p>
            </div>
        </div>
    </div>
</footer>

<!--Whatsapp widget-->
<div id="whatsapp-widget">
    <div class="chat-header" id="chat-header">
        <div class="avatar-container">
            <img src="assets/images/whatsapp-img.jpg" alt="logo">
            <div class="online-dot"></div>
        </div>
        <div class="chat-header-info">
            <span style="transform: translateY(2px);">Explore Vacations</span>
            <div style="color: #eeeeee;">online</div>

        </div>
        <button class="close-btn" id="close-btn">&times;</button>
    </div>
    <div class="chat-content" id="chat-content">
    </div>
    <div class="message-input" id="message-input">
        <button class="whatsapp-btn" id="whatsapp-btn">Chat in WhatsApp</button>
    </div>
    <div class="chat-icon" id="chat-icon">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </div>
</div>',
    '_isForward' => false,
  ),
  'contentType' => 
  array (
    'id' => 1,
    'name' => 'HTML',
    'description' => 'HTML content',
    'mime_type' => 'text/html',
    'file_extensions' => '.html',
    'icon' => '',
    'headers' => NULL,
    'binary' => 0,
  ),
  'policyCache' => 
  array (
  ),
  'elementCache' => 
  array (
    '[[$header?]]' => '<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="<?php echo WEBSITE_DESCRIPTION; ?>">
    <meta name="keywords" content="<?php echo WEBSITE_KEYWORDS; ?>">
    <meta name="author" content="Explore Vacations">
    <meta name="robots" content="index, follow">

    <!-- Page Title -->
    <title>Explore Vacations</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <!-- Canonical URL -->
    <link rel="canonical" href="">

    <!-- Fontawesome -->
    <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <!-- Swiper JS -->
    <link rel="stylesheet" href="node_modules/swiper/swiper-bundle.min.css">
    <!-- AOS Animations CSS -->
    <link href="node_modules/aos/dist/aos.css" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/overrides.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>

<body>
    <!-- Bootstrap -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Swiper JS -->
    <script src="node_modules/swiper/swiper-bundle.min.js"></script>
    <!-- AOS Animations JS -->
    <script src="node_modules/aos/dist/aos.js"></script>
    <!-- Whatsapp widget JS -->
    <script src="assets/js/whatsapp-widget.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>',
    '[[~2]]' => 'index.php?id=2',
    '[[~3]]' => 'index.php?id=3',
    '[[~4]]' => 'index.php?id=4',
    '[[~5]]' => 'index.php?id=5',
    '[[~7]]' => 'index.php?id=7',
    '[[$navbar?]]' => '<header>
    <!-- Navbar starts-->
    <nav class="navbar navbar-expand-lg p-lg-0">
        <div class="container">
            <a class="navbar-brand" href="./">
                <img src="assets/images/logo.png" alt="Explore Vacations | Logo" class="d-none d-lg-inline">
                <!-- <span>
                    Explore Vacations
                </span> -->
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars"></i>
            </button>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title">Explore Vacations</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="./" page-name="home">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=2" page-name="about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=3" page-name="tours">Tours</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=4" page-name="faq">FAQ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=5" page-name="blogs">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.php?id=7" page-name="contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar ends-->
</header>',
    '[[$footer?]]' => '<footer>
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-4 col order-lg-1 ">
                <h6 class="footer-logo m-0"><img src="assets/images/footer-logo.png" alt="Explore Vacations | Logo"></h6>
                <p class="my-3 my-lg-4">Join us in exploring Sri Lanka, <br>where adventure meets excellence.</p>
                <ul class="list-unstyled d-flex" id="footer-social-list">
                    <li class="me-2">
                        <a href="https://www.facebook.com/explorevacationssrilanka" target="_blank" alt="facebook">
                            <i class="fa-brands fa-facebook-f"></i>
                        </a>
                    </li>
                    <li class="mx-2">
                        <a href="https://www.instagram.com/explorevacationssrilanka/" target="_blank" alt="instragram">
                            <i class="fa-brands fa-instagram"></i>
                        </a>
                    </li>
                    <li class="ms-2">
                        <a href="https://wa.me/+94761414554" target="_blank" alt="whatsapp">
                            <i class="fa-brands fa-whatsapp"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-2">
                <h6 class="my-4 mt-lg-0">Links</h6>
                <ul class="list-unstyled" id="footer-nav-link-list">
                    <li>
                        <a href="./">Home</a>
                    </li>
                    <li>
                        <a href="index.php?id=2">About Us</a>
                    </li>
                    <li>
                        <a href="index.php?id=4">FAQ</a>
                    </li>
                    <li>
                        <a href="index.php?id=5">Blogs</a>
                    </li>
                    <li>
                        <a href="index.php?id=7">Contact Us</a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-4">
                <h6 class="my-4 mt-lg-0">Contact</h6>
                <ul class="list-unstyled" id="footer-contact-list">
                    <li>
                        <img src="assets/images/icons/footer-phone.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="tel:+94761414554">+94 76 1414 554</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-email.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="mailto:info@explorevacations.lk">info@explorevacations.lk</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-location.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="https://maps.app.goo.gl/Coi2NuS2utwZLLhC6" target="_blank">371/5 Negombo Rd, Seeduwa</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p class="m-0 py-4">Designed and Developed by <a href="" target="_blank">Explore Vacations</a>. <br class="d-md-none">¬© 2025</p>
            </div>
        </div>
    </div>
</footer>

<!--Whatsapp widget-->
<div id="whatsapp-widget">
    <div class="chat-header" id="chat-header">
        <div class="avatar-container">
            <img src="assets/images/whatsapp-img.jpg" alt="logo">
            <div class="online-dot"></div>
        </div>
        <div class="chat-header-info">
            <span style="transform: translateY(2px);">Explore Vacations</span>
            <div style="color: #eeeeee;">online</div>

        </div>
        <button class="close-btn" id="close-btn">&times;</button>
    </div>
    <div class="chat-content" id="chat-content">
    </div>
    <div class="message-input" id="message-input">
        <button class="whatsapp-btn" id="whatsapp-btn">Chat in WhatsApp</button>
    </div>
    <div class="chat-icon" id="chat-icon">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </div>
</div>',
  ),
  'sourceCache' => 
  array (
    'MODX\\Revolution\\modChunk' => 
    array (
      'header' => 
      array (
        'fields' => 
        array (
          'id' => 3,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'header',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="<?php echo WEBSITE_DESCRIPTION; ?>">
    <meta name="keywords" content="<?php echo WEBSITE_KEYWORDS; ?>">
    <meta name="author" content="Explore Vacations">
    <meta name="robots" content="index, follow">

    <!-- Page Title -->
    <title>Explore Vacations</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <!-- Canonical URL -->
    <link rel="canonical" href="">

    <!-- Fontawesome -->
    <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <!-- Swiper JS -->
    <link rel="stylesheet" href="node_modules/swiper/swiper-bundle.min.css">
    <!-- AOS Animations CSS -->
    <link href="node_modules/aos/dist/aos.css" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/overrides.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>

<body>
    <!-- Bootstrap -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Swiper JS -->
    <script src="node_modules/swiper/swiper-bundle.min.js"></script>
    <!-- AOS Animations JS -->
    <script src="node_modules/aos/dist/aos.js"></script>
    <!-- Whatsapp widget JS -->
    <script src="assets/js/whatsapp-widget.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="<?php echo WEBSITE_DESCRIPTION; ?>">
    <meta name="keywords" content="<?php echo WEBSITE_KEYWORDS; ?>">
    <meta name="author" content="Explore Vacations">
    <meta name="robots" content="index, follow">

    <!-- Page Title -->
    <title>Explore Vacations</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <!-- Canonical URL -->
    <link rel="canonical" href="">

    <!-- Fontawesome -->
    <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <!-- Swiper JS -->
    <link rel="stylesheet" href="node_modules/swiper/swiper-bundle.min.css">
    <!-- AOS Animations CSS -->
    <link href="node_modules/aos/dist/aos.css" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/overrides.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>

<body>
    <!-- Bootstrap -->
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Swiper JS -->
    <script src="node_modules/swiper/swiper-bundle.min.js"></script>
    <!-- AOS Animations JS -->
    <script src="node_modules/aos/dist/aos.js"></script>
    <!-- Whatsapp widget JS -->
    <script src="assets/js/whatsapp-widget.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'MODX\\Revolution\\Sources\\modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'navbar' => 
      array (
        'fields' => 
        array (
          'id' => 2,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'navbar',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<header>
    <!-- Navbar starts-->
    <nav class="navbar navbar-expand-lg p-lg-0">
        <div class="container">
            <a class="navbar-brand" href="./">
                <img src="assets/images/logo.png" alt="Explore Vacations | Logo" class="d-none d-lg-inline">
                <!-- <span>
                    Explore Vacations
                </span> -->
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars"></i>
            </button>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title">Explore Vacations</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="./" page-name="home">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~2]]" page-name="about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~3]]" page-name="tours">Tours</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~4]]" page-name="faq">FAQ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~5]]" page-name="blogs">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~7]]" page-name="contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar ends-->
</header>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<header>
    <!-- Navbar starts-->
    <nav class="navbar navbar-expand-lg p-lg-0">
        <div class="container">
            <a class="navbar-brand" href="./">
                <img src="assets/images/logo.png" alt="Explore Vacations | Logo" class="d-none d-lg-inline">
                <!-- <span>
                    Explore Vacations
                </span> -->
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars"></i>
            </button>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title">Explore Vacations</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="./" page-name="home">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~2]]" page-name="about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~3]]" page-name="tours">Tours</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~4]]" page-name="faq">FAQ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~5]]" page-name="blogs">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="[[~7]]" page-name="contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- Navbar ends-->
</header>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'MODX\\Revolution\\Sources\\modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'footer' => 
      array (
        'fields' => 
        array (
          'id' => 1,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'footer',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<footer>
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-4 col order-lg-1 ">
                <h6 class="footer-logo m-0"><img src="assets/images/footer-logo.png" alt="Explore Vacations | Logo"></h6>
                <p class="my-3 my-lg-4">Join us in exploring Sri Lanka, <br>where adventure meets excellence.</p>
                <ul class="list-unstyled d-flex" id="footer-social-list">
                    <li class="me-2">
                        <a href="https://www.facebook.com/explorevacationssrilanka" target="_blank" alt="facebook">
                            <i class="fa-brands fa-facebook-f"></i>
                        </a>
                    </li>
                    <li class="mx-2">
                        <a href="https://www.instagram.com/explorevacationssrilanka/" target="_blank" alt="instragram">
                            <i class="fa-brands fa-instagram"></i>
                        </a>
                    </li>
                    <li class="ms-2">
                        <a href="https://wa.me/+94761414554" target="_blank" alt="whatsapp">
                            <i class="fa-brands fa-whatsapp"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-2">
                <h6 class="my-4 mt-lg-0">Links</h6>
                <ul class="list-unstyled" id="footer-nav-link-list">
                    <li>
                        <a href="./">Home</a>
                    </li>
                    <li>
                        <a href="[[~2]]">About Us</a>
                    </li>
                    <li>
                        <a href="[[~4]]">FAQ</a>
                    </li>
                    <li>
                        <a href="[[~5]]">Blogs</a>
                    </li>
                    <li>
                        <a href="[[~7]]">Contact Us</a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-4">
                <h6 class="my-4 mt-lg-0">Contact</h6>
                <ul class="list-unstyled" id="footer-contact-list">
                    <li>
                        <img src="assets/images/icons/footer-phone.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="tel:+94761414554">+94 76 1414 554</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-email.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="mailto:info@explorevacations.lk">info@explorevacations.lk</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-location.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="https://maps.app.goo.gl/Coi2NuS2utwZLLhC6" target="_blank">371/5 Negombo Rd, Seeduwa</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p class="m-0 py-4">Designed and Developed by <a href="" target="_blank">Explore Vacations</a>. <br class="d-md-none">¬© 2025</p>
            </div>
        </div>
    </div>
</footer>

<!--Whatsapp widget-->
<div id="whatsapp-widget">
    <div class="chat-header" id="chat-header">
        <div class="avatar-container">
            <img src="assets/images/whatsapp-img.jpg" alt="logo">
            <div class="online-dot"></div>
        </div>
        <div class="chat-header-info">
            <span style="transform: translateY(2px);">Explore Vacations</span>
            <div style="color: #eeeeee;">online</div>

        </div>
        <button class="close-btn" id="close-btn">&times;</button>
    </div>
    <div class="chat-content" id="chat-content">
    </div>
    <div class="message-input" id="message-input">
        <button class="whatsapp-btn" id="whatsapp-btn">Chat in WhatsApp</button>
    </div>
    <div class="chat-icon" id="chat-icon">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </div>
</div>',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<footer>
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-4 col order-lg-1 ">
                <h6 class="footer-logo m-0"><img src="assets/images/footer-logo.png" alt="Explore Vacations | Logo"></h6>
                <p class="my-3 my-lg-4">Join us in exploring Sri Lanka, <br>where adventure meets excellence.</p>
                <ul class="list-unstyled d-flex" id="footer-social-list">
                    <li class="me-2">
                        <a href="https://www.facebook.com/explorevacationssrilanka" target="_blank" alt="facebook">
                            <i class="fa-brands fa-facebook-f"></i>
                        </a>
                    </li>
                    <li class="mx-2">
                        <a href="https://www.instagram.com/explorevacationssrilanka/" target="_blank" alt="instragram">
                            <i class="fa-brands fa-instagram"></i>
                        </a>
                    </li>
                    <li class="ms-2">
                        <a href="https://wa.me/+94761414554" target="_blank" alt="whatsapp">
                            <i class="fa-brands fa-whatsapp"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-2">
                <h6 class="my-4 mt-lg-0">Links</h6>
                <ul class="list-unstyled" id="footer-nav-link-list">
                    <li>
                        <a href="./">Home</a>
                    </li>
                    <li>
                        <a href="[[~2]]">About Us</a>
                    </li>
                    <li>
                        <a href="[[~4]]">FAQ</a>
                    </li>
                    <li>
                        <a href="[[~5]]">Blogs</a>
                    </li>
                    <li>
                        <a href="[[~7]]">Contact Us</a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6 col-lg-4 order-lg-4">
                <h6 class="my-4 mt-lg-0">Contact</h6>
                <ul class="list-unstyled" id="footer-contact-list">
                    <li>
                        <img src="assets/images/icons/footer-phone.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="tel:+94761414554">+94 76 1414 554</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-email.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="mailto:info@explorevacations.lk">info@explorevacations.lk</a>
                    </li>
                    <li>
                        <img src="assets/images/icons/footer-location.svg" alt="Explore Vacations | Footer Contact Icon" class="me-1">
                        <a href="https://maps.app.goo.gl/Coi2NuS2utwZLLhC6" target="_blank">371/5 Negombo Rd, Seeduwa</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p class="m-0 py-4">Designed and Developed by <a href="" target="_blank">Explore Vacations</a>. <br class="d-md-none">¬© 2025</p>
            </div>
        </div>
    </div>
</footer>

<!--Whatsapp widget-->
<div id="whatsapp-widget">
    <div class="chat-header" id="chat-header">
        <div class="avatar-container">
            <img src="assets/images/whatsapp-img.jpg" alt="logo">
            <div class="online-dot"></div>
        </div>
        <div class="chat-header-info">
            <span style="transform: translateY(2px);">Explore Vacations</span>
            <div style="color: #eeeeee;">online</div>

        </div>
        <button class="close-btn" id="close-btn">&times;</button>
    </div>
    <div class="chat-content" id="chat-content">
    </div>
    <div class="message-input" id="message-input">
        <button class="whatsapp-btn" id="whatsapp-btn">Chat in WhatsApp</button>
    </div>
    <div class="chat-icon" id="chat-icon">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </div>
</div>',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'MODX\\Revolution\\Sources\\modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'MODX\\Revolution\\modSnippet' => 
    array (
      'CustomizeTour' => 
      array (
        'fields' => 
        array (
          'id' => 6,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'CustomizeTour',
          'description' => '',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => 'ob_start();

include (\'config-details.php\');
    include \'assets/includes/db_connect.php\';
    include \'assets/includes/save_itenary.php\';

    // Get selected city IDs
    $cityIDs = isset($_GET[\'cities\']) ? $_GET[\'cities\'] : \'\';
    $cityIDsArray = array_filter(explode(\',\', $cityIDs));

    $selectedCities = [];

    if (!empty($cityIDsArray)) {
        $placeholders = rtrim(str_repeat(\'?,\', count($cityIDsArray)), \',\');
        $query = "
            SELECT id, name
            FROM cities
            WHERE id IN ($placeholders)
        ";
        $stmt = $conn->prepare($query);
        $stmt->execute($cityIDsArray);
        $selectedCities = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }


    // Get selected theme IDs from URL
    $themeIDs = isset($_GET[\'themes\']) ? $_GET[\'themes\'] : \'\';
    $themeIDsArray = array_filter(explode(",", $themeIDs));

    $themesData = [];
    $allImages = [];

    if (!empty($themeIDsArray)) {

        // Create dynamic placeholders (?, ?, ?)
        $placeholders = rtrim(str_repeat(\'?,\', count($themeIDsArray)), \',\');
        $query = "SELECT * FROM tour_themes WHERE id IN ($placeholders)";
        $stmt = $conn->prepare($query);
        $stmt->execute($themeIDsArray);
        $themesData = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Collect all images into one array
        foreach ($themesData as $theme) {
            $images = json_decode($theme[\'theme_images\'], true);

            if ($images) {
                foreach ($images as $img) {
                    $allImages[] = $img;
                }
            }
        }
    }

    // Fetch country codes from DB
    $countryCodes = [];
    try {
        $stmt = $conn->prepare("SELECT country_name, country_code FROM country_codes ORDER BY country_name ASC");
        $stmt->execute();
        $countryCodes = $stmt->fetchAll(PDO::FETCH_ASSOC);
    } catch (Exception $e) {
        // Handle error
        error_log("Error fetching country codes: " . $e->getMessage());
    }

?>

<head>
    <style>
        .dropdown-menu {
            display: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .dropdown-menu.show {
            display: block;
            max-height: 500px; 
        }

        .input-group-sm > .btn, .input-group-sm > .form-control {
            height: 30px;
            font-size: 0.875rem;
        }

        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            font-size: 1.5rem;
            justify-content: flex-start;
        }

        .star-rating input {
            display: none;
        }

        .star-rating label {
            color: #ddd;
            cursor: pointer;
            margin-right: 5px;
            transition: color 0.2s;
        }

        .star-rating input:checked ~ label,
        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: gold;
        }
    </style>
</head>

<body id="toursCustomizePage">
    <!-- Hero section starts -->
    <section id="hero">
        <img src="assets/images/cutomize-tour-hero.jpg" alt="Explore Vacations - Tours">
        <div class="hero-content">
            <h1>Customize Tours</h1>
        </div>
    </section>
    <!-- Hero section ends -->

    <!-- Customize Tours section starts -->
    <section id="customize-tour" class="py-5">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="tours">Tours</a></li>
                    <?php if (!empty($themesData)): ?>
                        <?php foreach ($themesData as $t): ?>
                            <li class="breadcrumb-item active">
                                <?php echo htmlspecialchars($t[\'theme_name\']); ?>
                            </li>
                        <?php endforeach; ?>
                    <?php endif; ?>
                </ol>
            </nav>

            <h2 class="heading mb-4">Plan Your Tour..</h2>
            <div class="row justify-content-center">
                <div class="col-12">
                    <div class="card shadow-sm">
                        <div id="tourCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <?php if (!empty($allImages)): ?>
                                    <?php foreach ($allImages as $index => $img): ?>
                                        <div class="carousel-item <?php echo $index === 0 ? \'active\' : \'\'; ?>">
                                            <img src="assets/<?php echo ltrim($img, \'/\'); ?>" class="d-block w-100 rounded" alt="Tour Image">
                                        </div>
                                    <?php endforeach; ?>
                                <?php else: ?>
                                    <div class="carousel-item active">
                                        <img src="assets/images/default-theme.jpg" class="d-block w-100 rounded" alt="No Image">
                                    </div>
                                <?php endif; ?>

                            </div>
                            <div class="carousel-indicators">
                                <?php foreach ($allImages as $index => $img): ?>
                                    <button type="button" data-bs-target="#tourCarousel" data-bs-slide-to="<?php echo $index; ?>" class="<?php echo $index === 0 ? \'active\' : \'\'; ?>" aria-current="<?php echo $index === 0 ? \'true\' : \'false\'; ?>" aria-label="Slide <?php echo $index + 1; ?>"></button>
                                <?php endforeach; ?>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div id="customizeForm">
                <div class="intro row align-items-center mt-4">
                    <div class="col">
                        <p class="mb-0">
                            ‚ú®Customize your trip, and send us your plan. We\'ll guide you through the next steps and put together a full itinerary with cozy stays üè®, fun activities üéâ, and all the details you need...
                        </p>
                    </div>
                </div>
                <hr>
                <form method="post" action="" id="customTourForm">
                    <div class="card mt-4 border-0">
                        <div class="row g-3 align-items-center">
                            <div class="col-md-6 col-lg-4">
                                <label class="form-label fw-semibold">Dates</label>
                                <div class="input-group">
                                    <input type="date" class="form-control text-center" name="start_date" placeholder="Start Date">
                                    <input type="text" class="form-control text-center" name="nights" placeholder="Nights" min="1">
                                    <input type="date" class="form-control text-center" name="end_date" placeholder="End Date">
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-4">
                                <label class="form-label fw-semibold">Guests</label>
                                <div class="dropdown">
                                    <button class="form-control text-start" type="button" id="guestDropdownButton">
                                        2 Adults, 0 Children, 0 Infants
                                    </button>
                                    <div class="dropdown-menu p-3" id="guestDropdownMenu" style="min-width: 250px;">
                                        <!-- Adults -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Adults</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="adults">-</button>
                                                <input type="number" class="form-control text-center" id="adults" value="2" min="1" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="adults">+</button>
                                            </div>
                                        </div>

                                        <!-- Children 6-11 -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Children (6-11)</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="children_6_11">-</button>
                                                <input type="number" class="form-control text-center" id="children_6_11" value="0" min="0" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="children_6_11">+</button>
                                            </div>
                                        </div>

                                        <!-- Children 12+ -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Children (12+)</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="children_above_11">-</button>
                                                <input type="number" class="form-control text-center" id="children_above_11" value="0" min="0" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="children_above_11">+</button>
                                            </div>
                                        </div>

                                        <!-- Infants -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Infants</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="infants">-</button>
                                                <input type="number" class="form-control text-center" id="infants" value="0" min="0" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="infants">+</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <input type="hidden" name="adults" id="adults_hidden">
                            <input type="hidden" name="children_6_11" id="children_6_11_hidden">
                            <input type="hidden" name="children_above_11" id="children_above_11_hidden">
                            <input type="hidden" name="infants" id="infants_hidden">


                            <div class="col-md-6 col-lg-4">
                                <label class="form-label fw-semibold">Preferred Hotel Rating</label>
                                <div class="d-flex gap-3 align-items-center">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="hotelRating" id="rating3" value="3">
                                        <label class="form-check-label" for="rating3">3 <span style="color:#ab9629">&#9733;</span></label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="hotelRating" id="rating4" value="4">
                                        <label class="form-check-label" for="rating4">4 <span style="color:#ab9629">&#9733;</span></label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="hotelRating" id="rating5" value="5">
                                        <label class="form-check-label" for="rating5">5 <span style="color:#ab9629">&#9733;</span></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>

                        <div class="row my-3">
                            <div class="col-12 col-md-6">
                                <label for="pickupLocation" class="form-label fw-semibold">Pickup Location</label>
                                <input type="text" class="form-control" id="pickupLocation" name="pickupLocation" placeholder="Enter pickup location" required>
                            </div>

                            <div class="col-12 col-md-6">
                                <label for="dropoffLocation" class="form-label fw-semibold">Dropoff Location</label>
                                <input type="text" class="form-control" id="dropoffLocation" name="dropoffLocation" placeholder="Enter dropoff location" required>
                            </div>
                        </div>

                        <?php if (!empty($selectedCities)): ?>
                        <hr>
                        <div class="row">
                            <!-- Selected Cities -->
                            <div class="col-md-6">
                                <h3>Selected Cities</h3>
                                <div class="row">
                                    <?php foreach ($selectedCities as $city): ?>
                                        <div class="col-md-6 col-lg-6 mb-2">
                                            <div class="card p-2 text-center" style="border-radius:0;">
                                                <?php echo htmlspecialchars($city[\'name\']); ?>
                                            </div>
                                        </div>
                                    <?php endforeach; ?>
                                </div>
                            </div>

                            <!-- Tour Map -->
                            <div class="col-md-6">
                                <h3>Tour Map</h3>
                                <div id="map" style="height:200px;width:100%;"></div>
                            </div>
                        </div>
                        <?php endif; ?>

                        <hr>

                        <div class="row">
                            <div class="col-12 col-md-6 mb-4">
                                <label class="form-label fw-semibold d-block">Preferred Meal Plan</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan1" value="Breakfast Only">
                                    <label class="form-check-label" for="mealPlan1">Breakfast Only</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan2" value="Half Board">
                                    <label class="form-check-label" for="mealPlan2">Half Board</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan3" value="Full Board">
                                    <label class="form-check-label" for="mealPlan3">Full Board</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan4" value="All Inclusive">
                                    <label class="form-check-label" for="mealPlan4">All Inclusive</label>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <label class="form-label fw-semibold d-block">Do you have any meal allergy issues?</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealAllergy" id="mealAllergyYes" value="Yes">
                                    <label class="form-check-label" for="mealAllergyYes">Yes</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealAllergy" id="mealAllergyNo" value="No">
                                    <label class="form-check-label" for="mealAllergyNo">No</label>
                                </div>
                                <div class="mt-2" id="allergyDetails" style="display:none;">
                                    <input type="text" class="form-control" name="allergy_reason" placeholder="Please specify your allergy">
                                </div>
                            </div>
                        </div>

                        <hr>

                        <div class="row">
                            <div class="col-12 col-md-6 mb-3">
                                <div class="row g-2 align-items-end">
                                    <div class="col-auto">
                                        <label for="title" class="form-label small">Title<span class="text-danger">*</span></label>
                                        <select class="form-select" id="title" name="title" required>
                                            <option value="" selected disabled>Select</option>
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Ms">Ms</option>
                                            <option value="Dr">Dr</option>
                                            <option value="Prof">Prof</option>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="fullName" class="form-label">Full Name<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Enter your full name" required>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="email">Email<span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <div class="row g-2 align-items-end">
                                    <div class="col-auto code" style="width:50%;">
                                        <label for="whatsappCode" class="form-label small">Code<span class="text-danger">*</span></label>
                                        <select class="form-select" id="whatsappCode" name="whatsappCode" required>
                                            <option value="" selected disabled>Select</option>
                                            <?php foreach($countryCodes as $c): ?>
                                                <option value="<?php echo htmlspecialchars($c[\'country_code\']); ?>">
                                                    <?php echo htmlspecialchars($c[\'country_name\'] . \' (\' . $c[\'country_code\'] . \')\'); ?>
                                                </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="whatsapp" class="form-label">WhatsApp Number<span class="text-danger">*</span></label>
                                        <input type="phone" class="form-control" id="whatsapp" name="whatsapp" placeholder="Enter WhatsApp number" required>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="country">Country<span class="text-danger">*</span></label>
                                <select class="form-select" id="country" name="country" required>
                                    <option value="" selected disabled>Select your country</option>
                                </select>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="nationality">Nationality<span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="nationality" name="nationality" placeholder="Enter your Nationality" required>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="flightNumber">Flight Number<span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="flightNumber" name="flightNumber" placeholder="Enter flight number" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="remarks">Remarks</label>
                                <textarea class="form-control" id="remarks" name="remarks" rows="4" placeholder="Any remarks or requests"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col d-flex justify-content-end">
                                <button class="btn btn-primary submit-button">Submit</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <!-- Customize Tours section ends -->

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBl50Q8W4ZF2_EkOJ1lnRoVxO1IdjIupjM&libraries=places&callback=initMap" async defer></script>

    <script>
        const btn = document.getElementById(\'guestDropdownButton\');
        const menu = document.getElementById(\'guestDropdownMenu\');
        const ids = [\'adults\',\'children_6_11\',\'children_above_11\',\'infants\'];

        btn.addEventListener(\'click\', () => menu.classList.toggle(\'show\'));
        document.addEventListener(\'click\', e => { if(!btn.contains(e.target)&&!menu.contains(e.target)) menu.classList.remove(\'show\'); });

        function update() {
            const adults = +document.getElementById(\'adults\').value;
            const children = ids.slice(1).reduce((s,id)=>s + +document.getElementById(id).value,0);
            btn.textContent = `${adults} Adults, ${children} Children`;

            document.getElementById(\'adults_hidden\').value = adults;
            document.getElementById(\'children_6_11_hidden\').value = document.getElementById(\'children_6_11\').value;
            document.getElementById(\'children_above_11_hidden\').value = document.getElementById(\'children_above_11\').value;
            document.getElementById(\'infants_hidden\').value = document.getElementById(\'infants\').value;
        }

        document.querySelectorAll(\'.increment,.decrement\').forEach(b=>{
            b.addEventListener(\'click\', ()=>{
                const i = document.getElementById(b.dataset.target);
                const min = +i.min||0;
                i.value = Math.max(min, +i.value + (b.classList.contains(\'increment\')?1:-1));
                update();
            });
        });

        update();

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const start = document.querySelector(\'input[name="start_date"]\');
            const end = document.querySelector(\'input[name="end_date"]\');
            const nights = document.querySelector(\'input[name="nights"]\');
            const today = new Date().toISOString().split(\'T\')[0];

            start.min = today;
            end.min = today;

            const calcNights = () => {
                const diff = (new Date(end.value) - new Date(start.value)) / (1000 * 60 * 60 * 24);
                nights.value = diff > 0 ? `${diff} night${diff > 1 ? \'s\' : \'\'}` : \'\';
            };

            start.addEventListener(\'change\', () => {
                if (end.value && new Date(end.value) < new Date(start.value)) end.value = nights.value = \'\';
                end.min = start.value;
                calcNights();
            });

            end.addEventListener(\'change\', calcNights);
        });
    </script>

    <script>
        let map;
        let geocoder;
        let bounds;
        let markers = [];
        let pathCoordinates = []; 

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 7,
                center: { lat: 7.8731, lng: 80.7718 } 
            });

            geocoder = new google.maps.Geocoder();
            bounds = new google.maps.LatLngBounds();

            const selectedCities = <?php echo json_encode($selectedCities); ?>;

            if (selectedCities.length === 0) return;

            let geocodePromises = selectedCities.map(city => geocodeCity(city.name));

            Promise.all(geocodePromises).then(coords => {
                pathCoordinates = coords.filter(c => c !== null); 

                if (pathCoordinates.length > 1) {
                    const tourPath = new google.maps.Polyline({
                        path: pathCoordinates,
                        geodesic: true,
                        strokeColor: \'#FF0000\',
                        strokeOpacity: 0.7,
                        strokeWeight: 4
                    });
                    tourPath.setMap(map);
                }

                bounds = new google.maps.LatLngBounds();
                pathCoordinates.forEach(coord => bounds.extend(coord));
                map.fitBounds(bounds);
            });

            initAutocomplete();
        }

        function geocodeCity(cityName) {
            return new Promise((resolve, reject) => {
                geocoder.geocode({ address: cityName + \', Sri Lanka\' }, (results, status) => {
                    if (status === \'OK\') {
                        const location = results[0].geometry.location;

                        new google.maps.Marker({
                            map: map,
                            position: location,
                            title: cityName
                        });

                        resolve(location);
                    } else {
                        console.warn(\'Geocode failed for:\', cityName, status);
                        resolve(null); 
                    }
                });
            });
        }

        function initAutocomplete() {
            const pickupInput = document.getElementById(\'pickupLocation\');
            const dropoffInput = document.getElementById(\'dropoffLocation\');

            const options = {
                types: [\'geocode\', \'establishment\'],
                componentRestrictions: { country: \'LK\' } 
            };

            if (pickupInput) {
                new google.maps.places.Autocomplete(pickupInput, options);
            }

            if (dropoffInput) {
                new google.maps.places.Autocomplete(dropoffInput, options);
            }
        }
    </script>

    <script>
        const yesRadio = document.getElementById(\'mealAllergyYes\');
        const noRadio = document.getElementById(\'mealAllergyNo\');
        const allergyInput = document.getElementById(\'allergyDetails\');

        yesRadio.addEventListener(\'change\', () => {
            allergyInput.style.display = yesRadio.checked ? \'block\' : \'none\';
        });

        noRadio.addEventListener(\'change\', () => {
            allergyInput.style.display = \'none\';
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const countrySelect = document.getElementById("country");
            fetch("https://restcountries.com/v3.1/all?fields=name")
                .then(res => res.json())
                .then(data => Array.isArray(data) && 
                    data.sort((a,b) => a.name.common.localeCompare(b.name.common))
                        .forEach(c => countrySelect.add(new Option(c.name.common, c.name.common)))
                )
                .catch(err => console.error("Error fetching countries:", err));
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            <?php if (!empty($_SESSION[\'itinerary_success\']) && !empty($_SESSION[\'pdf_to_download\'])): ?>
                Swal.fire({
                    icon: \'success\',
                    title: \'Submitted Successfully\',
                    text: \'Your tour request has been received.\',
                    confirmButtonText: \'Download Itinerary\'
                }).then(() => {
                    window.location.href = \'<?php echo $_SESSION[\'pdf_to_download\']; ?>\';
                });
                <?php
                unset($_SESSION[\'itinerary_success\'], $_SESSION[\'pdf_to_download\']);
                ?>
            <?php endif; ?>
        });
    </script>
</body>

<?php
return ob_get_clean();',
          'locked' => false,
          'properties' => 
          array (
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => 'ob_start();

include (\'config-details.php\');
    include \'assets/includes/db_connect.php\';
    include \'assets/includes/save_itenary.php\';

    // Get selected city IDs
    $cityIDs = isset($_GET[\'cities\']) ? $_GET[\'cities\'] : \'\';
    $cityIDsArray = array_filter(explode(\',\', $cityIDs));

    $selectedCities = [];

    if (!empty($cityIDsArray)) {
        $placeholders = rtrim(str_repeat(\'?,\', count($cityIDsArray)), \',\');
        $query = "
            SELECT id, name
            FROM cities
            WHERE id IN ($placeholders)
        ";
        $stmt = $conn->prepare($query);
        $stmt->execute($cityIDsArray);
        $selectedCities = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }


    // Get selected theme IDs from URL
    $themeIDs = isset($_GET[\'themes\']) ? $_GET[\'themes\'] : \'\';
    $themeIDsArray = array_filter(explode(",", $themeIDs));

    $themesData = [];
    $allImages = [];

    if (!empty($themeIDsArray)) {

        // Create dynamic placeholders (?, ?, ?)
        $placeholders = rtrim(str_repeat(\'?,\', count($themeIDsArray)), \',\');
        $query = "SELECT * FROM tour_themes WHERE id IN ($placeholders)";
        $stmt = $conn->prepare($query);
        $stmt->execute($themeIDsArray);
        $themesData = $stmt->fetchAll(PDO::FETCH_ASSOC);

        // Collect all images into one array
        foreach ($themesData as $theme) {
            $images = json_decode($theme[\'theme_images\'], true);

            if ($images) {
                foreach ($images as $img) {
                    $allImages[] = $img;
                }
            }
        }
    }

    // Fetch country codes from DB
    $countryCodes = [];
    try {
        $stmt = $conn->prepare("SELECT country_name, country_code FROM country_codes ORDER BY country_name ASC");
        $stmt->execute();
        $countryCodes = $stmt->fetchAll(PDO::FETCH_ASSOC);
    } catch (Exception $e) {
        // Handle error
        error_log("Error fetching country codes: " . $e->getMessage());
    }

?>

<head>
    <style>
        .dropdown-menu {
            display: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .dropdown-menu.show {
            display: block;
            max-height: 500px; 
        }

        .input-group-sm > .btn, .input-group-sm > .form-control {
            height: 30px;
            font-size: 0.875rem;
        }

        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            font-size: 1.5rem;
            justify-content: flex-start;
        }

        .star-rating input {
            display: none;
        }

        .star-rating label {
            color: #ddd;
            cursor: pointer;
            margin-right: 5px;
            transition: color 0.2s;
        }

        .star-rating input:checked ~ label,
        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: gold;
        }
    </style>
</head>

<body id="toursCustomizePage">
    <!-- Hero section starts -->
    <section id="hero">
        <img src="assets/images/cutomize-tour-hero.jpg" alt="Explore Vacations - Tours">
        <div class="hero-content">
            <h1>Customize Tours</h1>
        </div>
    </section>
    <!-- Hero section ends -->

    <!-- Customize Tours section starts -->
    <section id="customize-tour" class="py-5">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="tours">Tours</a></li>
                    <?php if (!empty($themesData)): ?>
                        <?php foreach ($themesData as $t): ?>
                            <li class="breadcrumb-item active">
                                <?php echo htmlspecialchars($t[\'theme_name\']); ?>
                            </li>
                        <?php endforeach; ?>
                    <?php endif; ?>
                </ol>
            </nav>

            <h2 class="heading mb-4">Plan Your Tour..</h2>
            <div class="row justify-content-center">
                <div class="col-12">
                    <div class="card shadow-sm">
                        <div id="tourCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <?php if (!empty($allImages)): ?>
                                    <?php foreach ($allImages as $index => $img): ?>
                                        <div class="carousel-item <?php echo $index === 0 ? \'active\' : \'\'; ?>">
                                            <img src="assets/<?php echo ltrim($img, \'/\'); ?>" class="d-block w-100 rounded" alt="Tour Image">
                                        </div>
                                    <?php endforeach; ?>
                                <?php else: ?>
                                    <div class="carousel-item active">
                                        <img src="assets/images/default-theme.jpg" class="d-block w-100 rounded" alt="No Image">
                                    </div>
                                <?php endif; ?>

                            </div>
                            <div class="carousel-indicators">
                                <?php foreach ($allImages as $index => $img): ?>
                                    <button type="button" data-bs-target="#tourCarousel" data-bs-slide-to="<?php echo $index; ?>" class="<?php echo $index === 0 ? \'active\' : \'\'; ?>" aria-current="<?php echo $index === 0 ? \'true\' : \'false\'; ?>" aria-label="Slide <?php echo $index + 1; ?>"></button>
                                <?php endforeach; ?>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div id="customizeForm">
                <div class="intro row align-items-center mt-4">
                    <div class="col">
                        <p class="mb-0">
                            ‚ú®Customize your trip, and send us your plan. We\'ll guide you through the next steps and put together a full itinerary with cozy stays üè®, fun activities üéâ, and all the details you need...
                        </p>
                    </div>
                </div>
                <hr>
                <form method="post" action="" id="customTourForm">
                    <div class="card mt-4 border-0">
                        <div class="row g-3 align-items-center">
                            <div class="col-md-6 col-lg-4">
                                <label class="form-label fw-semibold">Dates</label>
                                <div class="input-group">
                                    <input type="date" class="form-control text-center" name="start_date" placeholder="Start Date">
                                    <input type="text" class="form-control text-center" name="nights" placeholder="Nights" min="1">
                                    <input type="date" class="form-control text-center" name="end_date" placeholder="End Date">
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-4">
                                <label class="form-label fw-semibold">Guests</label>
                                <div class="dropdown">
                                    <button class="form-control text-start" type="button" id="guestDropdownButton">
                                        2 Adults, 0 Children, 0 Infants
                                    </button>
                                    <div class="dropdown-menu p-3" id="guestDropdownMenu" style="min-width: 250px;">
                                        <!-- Adults -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Adults</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="adults">-</button>
                                                <input type="number" class="form-control text-center" id="adults" value="2" min="1" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="adults">+</button>
                                            </div>
                                        </div>

                                        <!-- Children 6-11 -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Children (6-11)</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="children_6_11">-</button>
                                                <input type="number" class="form-control text-center" id="children_6_11" value="0" min="0" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="children_6_11">+</button>
                                            </div>
                                        </div>

                                        <!-- Children 12+ -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Children (12+)</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="children_above_11">-</button>
                                                <input type="number" class="form-control text-center" id="children_above_11" value="0" min="0" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="children_above_11">+</button>
                                            </div>
                                        </div>

                                        <!-- Infants -->
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span>Infants</span>
                                            <div class="input-group input-group-sm" style="width: 100px;">
                                                <button class="btn btn-outline-secondary decrement" type="button" data-target="infants">-</button>
                                                <input type="number" class="form-control text-center" id="infants" value="0" min="0" readonly>
                                                <button class="btn btn-outline-secondary increment" type="button" data-target="infants">+</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <input type="hidden" name="adults" id="adults_hidden">
                            <input type="hidden" name="children_6_11" id="children_6_11_hidden">
                            <input type="hidden" name="children_above_11" id="children_above_11_hidden">
                            <input type="hidden" name="infants" id="infants_hidden">


                            <div class="col-md-6 col-lg-4">
                                <label class="form-label fw-semibold">Preferred Hotel Rating</label>
                                <div class="d-flex gap-3 align-items-center">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="hotelRating" id="rating3" value="3">
                                        <label class="form-check-label" for="rating3">3 <span style="color:#ab9629">&#9733;</span></label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="hotelRating" id="rating4" value="4">
                                        <label class="form-check-label" for="rating4">4 <span style="color:#ab9629">&#9733;</span></label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="hotelRating" id="rating5" value="5">
                                        <label class="form-check-label" for="rating5">5 <span style="color:#ab9629">&#9733;</span></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>

                        <div class="row my-3">
                            <div class="col-12 col-md-6">
                                <label for="pickupLocation" class="form-label fw-semibold">Pickup Location</label>
                                <input type="text" class="form-control" id="pickupLocation" name="pickupLocation" placeholder="Enter pickup location" required>
                            </div>

                            <div class="col-12 col-md-6">
                                <label for="dropoffLocation" class="form-label fw-semibold">Dropoff Location</label>
                                <input type="text" class="form-control" id="dropoffLocation" name="dropoffLocation" placeholder="Enter dropoff location" required>
                            </div>
                        </div>

                        <?php if (!empty($selectedCities)): ?>
                        <hr>
                        <div class="row">
                            <!-- Selected Cities -->
                            <div class="col-md-6">
                                <h3>Selected Cities</h3>
                                <div class="row">
                                    <?php foreach ($selectedCities as $city): ?>
                                        <div class="col-md-6 col-lg-6 mb-2">
                                            <div class="card p-2 text-center" style="border-radius:0;">
                                                <?php echo htmlspecialchars($city[\'name\']); ?>
                                            </div>
                                        </div>
                                    <?php endforeach; ?>
                                </div>
                            </div>

                            <!-- Tour Map -->
                            <div class="col-md-6">
                                <h3>Tour Map</h3>
                                <div id="map" style="height:200px;width:100%;"></div>
                            </div>
                        </div>
                        <?php endif; ?>

                        <hr>

                        <div class="row">
                            <div class="col-12 col-md-6 mb-4">
                                <label class="form-label fw-semibold d-block">Preferred Meal Plan</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan1" value="Breakfast Only">
                                    <label class="form-check-label" for="mealPlan1">Breakfast Only</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan2" value="Half Board">
                                    <label class="form-check-label" for="mealPlan2">Half Board</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan3" value="Full Board">
                                    <label class="form-check-label" for="mealPlan3">Full Board</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealPlan" id="mealPlan4" value="All Inclusive">
                                    <label class="form-check-label" for="mealPlan4">All Inclusive</label>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-4">
                                <label class="form-label fw-semibold d-block">Do you have any meal allergy issues?</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealAllergy" id="mealAllergyYes" value="Yes">
                                    <label class="form-check-label" for="mealAllergyYes">Yes</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="mealAllergy" id="mealAllergyNo" value="No">
                                    <label class="form-check-label" for="mealAllergyNo">No</label>
                                </div>
                                <div class="mt-2" id="allergyDetails" style="display:none;">
                                    <input type="text" class="form-control" name="allergy_reason" placeholder="Please specify your allergy">
                                </div>
                            </div>
                        </div>

                        <hr>

                        <div class="row">
                            <div class="col-12 col-md-6 mb-3">
                                <div class="row g-2 align-items-end">
                                    <div class="col-auto">
                                        <label for="title" class="form-label small">Title<span class="text-danger">*</span></label>
                                        <select class="form-select" id="title" name="title" required>
                                            <option value="" selected disabled>Select</option>
                                            <option value="Mr">Mr</option>
                                            <option value="Mrs">Mrs</option>
                                            <option value="Ms">Ms</option>
                                            <option value="Dr">Dr</option>
                                            <option value="Prof">Prof</option>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="fullName" class="form-label">Full Name<span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Enter your full name" required>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="email">Email<span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <div class="row g-2 align-items-end">
                                    <div class="col-auto code" style="width:50%;">
                                        <label for="whatsappCode" class="form-label small">Code<span class="text-danger">*</span></label>
                                        <select class="form-select" id="whatsappCode" name="whatsappCode" required>
                                            <option value="" selected disabled>Select</option>
                                            <?php foreach($countryCodes as $c): ?>
                                                <option value="<?php echo htmlspecialchars($c[\'country_code\']); ?>">
                                                    <?php echo htmlspecialchars($c[\'country_name\'] . \' (\' . $c[\'country_code\'] . \')\'); ?>
                                                </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="whatsapp" class="form-label">WhatsApp Number<span class="text-danger">*</span></label>
                                        <input type="phone" class="form-control" id="whatsapp" name="whatsapp" placeholder="Enter WhatsApp number" required>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="country">Country<span class="text-danger">*</span></label>
                                <select class="form-select" id="country" name="country" required>
                                    <option value="" selected disabled>Select your country</option>
                                </select>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="nationality">Nationality<span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="nationality" name="nationality" placeholder="Enter your Nationality" required>
                            </div>

                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="flightNumber">Flight Number<span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="flightNumber" name="flightNumber" placeholder="Enter flight number" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label fw-semibold" for="remarks">Remarks</label>
                                <textarea class="form-control" id="remarks" name="remarks" rows="4" placeholder="Any remarks or requests"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col d-flex justify-content-end">
                                <button class="btn btn-primary submit-button">Submit</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <!-- Customize Tours section ends -->

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBl50Q8W4ZF2_EkOJ1lnRoVxO1IdjIupjM&libraries=places&callback=initMap" async defer></script>

    <script>
        const btn = document.getElementById(\'guestDropdownButton\');
        const menu = document.getElementById(\'guestDropdownMenu\');
        const ids = [\'adults\',\'children_6_11\',\'children_above_11\',\'infants\'];

        btn.addEventListener(\'click\', () => menu.classList.toggle(\'show\'));
        document.addEventListener(\'click\', e => { if(!btn.contains(e.target)&&!menu.contains(e.target)) menu.classList.remove(\'show\'); });

        function update() {
            const adults = +document.getElementById(\'adults\').value;
            const children = ids.slice(1).reduce((s,id)=>s + +document.getElementById(id).value,0);
            btn.textContent = `${adults} Adults, ${children} Children`;

            document.getElementById(\'adults_hidden\').value = adults;
            document.getElementById(\'children_6_11_hidden\').value = document.getElementById(\'children_6_11\').value;
            document.getElementById(\'children_above_11_hidden\').value = document.getElementById(\'children_above_11\').value;
            document.getElementById(\'infants_hidden\').value = document.getElementById(\'infants\').value;
        }

        document.querySelectorAll(\'.increment,.decrement\').forEach(b=>{
            b.addEventListener(\'click\', ()=>{
                const i = document.getElementById(b.dataset.target);
                const min = +i.min||0;
                i.value = Math.max(min, +i.value + (b.classList.contains(\'increment\')?1:-1));
                update();
            });
        });

        update();

    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const start = document.querySelector(\'input[name="start_date"]\');
            const end = document.querySelector(\'input[name="end_date"]\');
            const nights = document.querySelector(\'input[name="nights"]\');
            const today = new Date().toISOString().split(\'T\')[0];

            start.min = today;
            end.min = today;

            const calcNights = () => {
                const diff = (new Date(end.value) - new Date(start.value)) / (1000 * 60 * 60 * 24);
                nights.value = diff > 0 ? `${diff} night${diff > 1 ? \'s\' : \'\'}` : \'\';
            };

            start.addEventListener(\'change\', () => {
                if (end.value && new Date(end.value) < new Date(start.value)) end.value = nights.value = \'\';
                end.min = start.value;
                calcNights();
            });

            end.addEventListener(\'change\', calcNights);
        });
    </script>

    <script>
        let map;
        let geocoder;
        let bounds;
        let markers = [];
        let pathCoordinates = []; 

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 7,
                center: { lat: 7.8731, lng: 80.7718 } 
            });

            geocoder = new google.maps.Geocoder();
            bounds = new google.maps.LatLngBounds();

            const selectedCities = <?php echo json_encode($selectedCities); ?>;

            if (selectedCities.length === 0) return;

            let geocodePromises = selectedCities.map(city => geocodeCity(city.name));

            Promise.all(geocodePromises).then(coords => {
                pathCoordinates = coords.filter(c => c !== null); 

                if (pathCoordinates.length > 1) {
                    const tourPath = new google.maps.Polyline({
                        path: pathCoordinates,
                        geodesic: true,
                        strokeColor: \'#FF0000\',
                        strokeOpacity: 0.7,
                        strokeWeight: 4
                    });
                    tourPath.setMap(map);
                }

                bounds = new google.maps.LatLngBounds();
                pathCoordinates.forEach(coord => bounds.extend(coord));
                map.fitBounds(bounds);
            });

            initAutocomplete();
        }

        function geocodeCity(cityName) {
            return new Promise((resolve, reject) => {
                geocoder.geocode({ address: cityName + \', Sri Lanka\' }, (results, status) => {
                    if (status === \'OK\') {
                        const location = results[0].geometry.location;

                        new google.maps.Marker({
                            map: map,
                            position: location,
                            title: cityName
                        });

                        resolve(location);
                    } else {
                        console.warn(\'Geocode failed for:\', cityName, status);
                        resolve(null); 
                    }
                });
            });
        }

        function initAutocomplete() {
            const pickupInput = document.getElementById(\'pickupLocation\');
            const dropoffInput = document.getElementById(\'dropoffLocation\');

            const options = {
                types: [\'geocode\', \'establishment\'],
                componentRestrictions: { country: \'LK\' } 
            };

            if (pickupInput) {
                new google.maps.places.Autocomplete(pickupInput, options);
            }

            if (dropoffInput) {
                new google.maps.places.Autocomplete(dropoffInput, options);
            }
        }
    </script>

    <script>
        const yesRadio = document.getElementById(\'mealAllergyYes\');
        const noRadio = document.getElementById(\'mealAllergyNo\');
        const allergyInput = document.getElementById(\'allergyDetails\');

        yesRadio.addEventListener(\'change\', () => {
            allergyInput.style.display = yesRadio.checked ? \'block\' : \'none\';
        });

        noRadio.addEventListener(\'change\', () => {
            allergyInput.style.display = \'none\';
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const countrySelect = document.getElementById("country");
            fetch("https://restcountries.com/v3.1/all?fields=name")
                .then(res => res.json())
                .then(data => Array.isArray(data) && 
                    data.sort((a,b) => a.name.common.localeCompare(b.name.common))
                        .forEach(c => countrySelect.add(new Option(c.name.common, c.name.common)))
                )
                .catch(err => console.error("Error fetching countries:", err));
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            <?php if (!empty($_SESSION[\'itinerary_success\']) && !empty($_SESSION[\'pdf_to_download\'])): ?>
                Swal.fire({
                    icon: \'success\',
                    title: \'Submitted Successfully\',
                    text: \'Your tour request has been received.\',
                    confirmButtonText: \'Download Itinerary\'
                }).then(() => {
                    window.location.href = \'<?php echo $_SESSION[\'pdf_to_download\']; ?>\';
                });
                <?php
                unset($_SESSION[\'itinerary_success\'], $_SESSION[\'pdf_to_download\']);
                ?>
            <?php endif; ?>
        });
    </script>
</body>

<?php
return ob_get_clean();',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'MODX\\Revolution\\Sources\\modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'MODX\\Revolution\\modTemplateVar' => 
    array (
    ),
  ),
);